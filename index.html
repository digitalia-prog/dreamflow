<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚ö° DreamFlow</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:linear-gradient(135deg,#050505,#1a003d);color:#fff;font-family:Arial,sans-serif;min-height:100vh;padding:20px}
.container{max-width:1200px;margin:0 auto}
nav{display:flex;justify-content:space-between;align-items:center;padding:20px 0;border-bottom:2px solid #8F63E9}
.logo{font-size:2rem;font-weight:bold}
.nav-buttons button{padding:10px 20px;margin:0 10px;background:#8F63E9;color:#fff;border:none;border-radius:8px;cursor:pointer}
.main{display:grid;grid-template-columns:1fr 1fr;gap:40px;margin-top:40px}
.panel{background:rgba(143,99,233,.1);padding:30px;border-radius:12px;border:1px solid #8F63E9}
.panel h2{margin-bottom:20px;font-size:1.5rem}
.form-group{margin-bottom:20px}
.form-group label{display:block;margin-bottom:8px;font-weight:bold}
.form-group select{width:100%;padding:12px;border:2px solid #8F63E9;border-radius:8px;background:rgba(0,0,0,.3);color:#fff;font-size:1rem}
.form-group input{width:100%;padding:12px;border:2px solid #8F63E9;border-radius:8px;background:rgba(0,0,0,.3);color:#fff}
.btn{padding:12px 24px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:bold;font-size:1rem;width:100%;margin-top:10px}
.btn:hover{transform:scale(1.05)}
.script-card{background:rgba(143,99,233,.1);padding:20px;border-radius:12px;margin:15px 0;border-left:4px solid #8F63E9}
.script-card h4{margin-bottom:10px}
.script-card p{font-size:0.9rem;line-height:1.6}
.stats{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-top:20px}
.stat-box{background:rgba(143,99,233,.1);padding:15px;border-radius:8px;text-align:center}
.stat-box .number{font-size:1.5rem;font-weight:bold;color:#667eea}
.trending{background:rgba(143,99,233,.05);padding:20px;border-radius:12px;margin-top:20px}
.trending h3{margin-bottom:15px}
.trending-item{padding:10px;background:rgba(143,99,233,.1);margin:5px 0;border-radius:6px}
</style>
</head>
<body>
<div class="container">
<nav>
<div class="logo">‚ö° DreamFlow</div>
<div class="nav-buttons">
<button onclick="logout()">Logout</button>
</div>
</nav>

<div class="main">
<div class="panel">
<h2>‚ú® Generator Scripts</h2>

<div class="form-group">
<label>üì± Network</label>
<select id="network">
<option>tiktok</option>
<option>instagram</option>
<option>youtube</option>
<option>facebook</option>
</select>
</div>

<div class="form-group">
<label>üåê Language</label>
<select id="language">
<option>fr</option>
<option>en</option>
<option>es</option>
<option>it</option>
</select>
</div>

<div class="form-group">
<label>üéØ Niche</label>
<select id="niche">
<option>fashion</option>
<option>fitness</option>
<option>food</option>
<option>beauty</option>
<option>tech</option>
<option>marketing</option>
<option>realestate</option>
<option>ecommerce</option>
</select>
</div>

<div class="form-group">
<label>üìä Count</label>
<select id="count">
<option>1</option>
<option>3</option>
<option>5</option>
</select>
</div>

<button class="btn" onclick="generateScripts()">üöÄ Generate</button>

<div id="results"></div>
</div>

<div class="panel">
<h2>üìä Trends</h2>
<div class="trending" id="trends"></div>

<h2 style="margin-top:30px">üìà Your Stats</h2>
<div class="stats">
<div class="stat-box">
<div class="number" id="totalScripts">0</div>
<div>Scripts Generated</div>
</div>
<div class="stat-box">
<div class="number" id="totalUsers">0</div>
<div>Active Users</div>
</div>
</div>
</div>
</div>
</div>

<script>
async function generateScripts() {
  const network = document.getElementById('network').value;
  const language = document.getElementById('language').value;
  const niche = document.getElementById('niche').value;
  const count = document.getElementById('count').value;

  try {
    const response = await fetch('/api/generate', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ network, language, niche, count, brandId: 'default' })
    });

    const data = await response.json();
    
    if (data.success) {
      let html = `<h3>‚úÖ ${data.scripts.length} scripts g√©n√©r√©s!</h3>`;
      data.scripts.forEach((script, i) => {
        html += `
          <div class="script-card">
            <h4>${script.title}</h4>
            <p>${script.content}</p>
            <p>üìä Score: ${script.score}% | üëÅÔ∏è Views: ${script.views} | üí¨ Engagement: ${script.engagement}%</p>
          </div>
        `;
      });
      document.getElementById('results').innerHTML = html;
      loadAnalytics();
    } else {
      document.getElementById('results').innerHTML = `<p style="color:red">‚ùå Error: ${data.error}</p>`;
    }
  } catch (err) {
    document.getElementById('results').innerHTML = `<p style="color:red">‚ùå Error: ${err.message}</p>`;
  }
}

async function loadAnalytics() {
  try {
    const response = await fetch('/api/analytics');
    const data = await response.json();
    document.getElementById('totalScripts').textContent = data.scripts || 0;
    document.getElementById('totalUsers').textContent = data.users || 0;
  } catch (err) {
    console.error('Analytics error:', err);
  }
}

function logout() {
  alert('Logged out!');
  location.reload();
}

loadAnalytics();
</script>
</body>
</html>
